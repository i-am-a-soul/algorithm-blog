import{_ as h,r as d,o as k,c as g,a as e,d as s,w as a,b as n,e as o}from"./app-nQkb7BpC.js";const y="/algorithm-blog/img/0017.png",z="/algorithm-blog/img/0018.png",x={},b=o('<h1 id="st表" tabindex="-1"><a class="header-anchor" href="#st表" aria-hidden="true">#</a> <code>ST</code>表</h1><h2 id="原理" tabindex="-1"><a class="header-anchor" href="#原理" aria-hidden="true">#</a> 原理</h2><p>见《进阶指南》第<code>41</code>页。</p><h3 id="预处理" tabindex="-1"><a class="header-anchor" href="#预处理" aria-hidden="true">#</a> 预处理</h3>',4),v={class:"katex"},j={class:"katex-mathml"},w=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span>',1),q={class:"katex"},S={class:"katex-mathml"},T=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span></span></span>',1),N={class:"katex"},O={class:"katex-mathml"},V=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.0746639999999998em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">+</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span>',1),B={class:"katex"},E={class:"katex-mathml"},C=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:0.824664em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span>',1),I=e("p",null,[e("img",{src:y,alt:""})],-1),L={class:"katex"},P={class:"katex-mathml"},A=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.0746639999999998em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">+</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mclose">)</span></span></span>',1),D=e("p",null,"两个上界：",-1),F={class:"katex"},G={class:"katex-mathml"},H=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:0.960634em;vertical-align:-0.13597em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">≤</span><span class="mord mathit">n</span></span></span>',1),J={class:"katex"},K={class:"katex-mathml"},M=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span>',1),Q={class:"katex"},R={class:"katex-mathml"},U=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:0.960634em;vertical-align:-0.13597em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mbin">+</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mrel">≤</span><span class="mord mathit">n</span></span></span>',1),W={class:"katex"},X={class:"katex-mathml"},Y=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:0.960634em;vertical-align:-0.13597em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">≤</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span>',1),Z=e("h3",{id:"查询",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#查询","aria-hidden":"true"},"#"),n(" 查询")],-1),$=e("p",null,[n("下文以"),e("code",null,"len"),n("表示待查询区间的长度。")],-1),ss={class:"katex"},as={class:"katex-mathml"},ns=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">=</span><span class="mopen">⌊</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mclose">⌋</span></span></span>',1),ts=e("p",null,[e("img",{src:z,alt:""})],-1),ls=e("code",null,"2",-1),es={class:"katex"},ps={class:"katex-mathml"},cs=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:0.9713299999999999em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">⌊</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mclose">⌋</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span></span></span>',1),os=e("code",null,"2",-1),us={class:"katex"},is={class:"katex-mathml"},rs=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:0.9713299999999999em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">⌊</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mclose">⌋</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">⌊</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mclose">⌋</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">⌈</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mclose">⌉</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">&gt;</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span></span></span>',1),ms=e("h2",{id:"时间复杂度",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#时间复杂度","aria-hidden":"true"},"#"),n(" 时间复杂度")],-1),ds={class:"katex"},fs={class:"katex-mathml"},_s=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span>',1),hs={class:"katex"},ks={class:"katex-mathml"},gs=o('<span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span>',1),ys=e("h2",{id:"模板题",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#模板题","aria-hidden":"true"},"#"),n(" 模板题")],-1),zs={href:"https://www.luogu.com.cn/problem/P3865",target:"_blank",rel:"noopener noreferrer"},xs=o(`<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cmath&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">100010</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">,</span> q<span class="token punctuation">;</span>
<span class="token keyword">int</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">ST_create</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> <span class="token operator">++</span> j<span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span>
            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">ST_query</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>r <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">ST_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>q <span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> l<span class="token punctuation">,</span> r<span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> <span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\\n&quot;</span><span class="token punctuation">,</span> <span class="token function">ST_query</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function bs(vs,js){const t=d("mi"),l=d("mo"),c=d("mrow"),u=d("annotation"),i=d("semantics"),r=d("math"),p=d("mn"),m=d("msup"),f=d("msub"),_=d("ExternalLinkIcon");return k(),g("div",null,[b,e("p",null,[e("span",v,[e("span",j,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("f")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("f[i][j]")]),_:1})]),_:1})]),_:1})]),w]),n("记录从"),e("span",q,[e("span",S,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("a")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("a[i]")]),_:1})]),_:1})]),_:1})]),T]),n("到"),e("span",N,[e("span",O,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("a")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("+")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("a[i + 2^j-1]")]),_:1})]),_:1})]),_:1})]),V]),n("共"),e("span",B,[e("span",E,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1})]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("2^j")]),_:1})]),_:1})]),_:1})]),C]),n("个数的最大值。")]),I,e("p",null,[n("状态转移方程："),e("span",L,[e("span",P,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("f")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(t,null,{default:a(()=>[n("m")]),_:1}),s(t,null,{default:a(()=>[n("a")]),_:1}),s(t,null,{default:a(()=>[n("x")]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("f")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1}),s(l,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,{separator:"true"},{default:a(()=>[n(",")]),_:1}),s(t,null,{default:a(()=>[n("f")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("+")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("j")]),_:1}),s(l,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,null,{default:a(()=>[n("[")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1}),s(l,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(l,null,{default:a(()=>[n("]")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("f[i][j] = max(f[i][j - 1], f[i +2^{j-1}][j - 1])")]),_:1})]),_:1})]),_:1})]),A]),n("。")]),D,e("ul",null,[e("li",null,[e("p",null,[n("由"),e("span",F,[e("span",G,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("≤")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("2^j \\le n")]),_:1})]),_:1})]),_:1})]),H]),n("得，"),e("span",J,[e("span",K,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("j")]),_:1}),s(l,null,{default:a(()=>[n("≤")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(f,null,{default:a(()=>[s(t,null,{default:a(()=>[n("g")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("j \\le log_2(n)")]),_:1})]),_:1})]),_:1})]),M]),n("。")])]),e("li",null,[e("p",null,[n("由"),e("span",Q,[e("span",R,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("+")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("−")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(l,null,{default:a(()=>[n("≤")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("i + 2^j-1 \\le n")]),_:1})]),_:1})]),_:1})]),U]),n("得， "),e("span",W,[e("span",X,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("i")]),_:1}),s(l,null,{default:a(()=>[n("≤")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n("−")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("j")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("+")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("i \\le n- 2^j+1")]),_:1})]),_:1})]),_:1})]),Y]),n("。")])])]),Z,$,e("p",null,[n("设"),e("span",ss,[e("span",as,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("k")]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(l,null,{default:a(()=>[n("⌊")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(f,null,{default:a(()=>[s(t,null,{default:a(()=>[n("g")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1}),s(l,null,{default:a(()=>[n("⌋")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("k = \\lfloor log_2(len) \\rfloor")]),_:1})]),_:1})]),_:1})]),ns]),n("。")]),ts,e("ul",null,[e("li",null,[e("p",null,[n("当待查询区间的长度是"),ls,n("的非负整数次幂时，"),e("span",es,[e("span",ps,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(l,null,{default:a(()=>[n("×")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("k")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1}),s(l,null,{default:a(()=>[n("×")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(c,null,{default:a(()=>[s(l,null,{default:a(()=>[n("⌊")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(f,null,{default:a(()=>[s(t,null,{default:a(()=>[n("g")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1}),s(l,null,{default:a(()=>[n("⌋")]),_:1})]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1}),s(l,null,{default:a(()=>[n("×")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(">")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("2\\times 2^k=2 \\times 2^{\\lfloor log_2(len) \\rfloor}=2\\times len \\gt len")]),_:1})]),_:1})]),_:1})]),cs]),n("。")])]),e("li",null,[e("p",null,[n("当待查询区间的长度不是"),os,n("的非负整数次幂时，"),e("span",us,[e("span",is,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(l,null,{default:a(()=>[n("×")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(t,null,{default:a(()=>[n("k")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1}),s(l,null,{default:a(()=>[n("×")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(c,null,{default:a(()=>[s(l,null,{default:a(()=>[n("⌊")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(f,null,{default:a(()=>[s(t,null,{default:a(()=>[n("g")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1}),s(l,null,{default:a(()=>[n("⌋")]),_:1})]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(c,null,{default:a(()=>[s(l,null,{default:a(()=>[n("⌊")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(f,null,{default:a(()=>[s(t,null,{default:a(()=>[n("g")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1}),s(l,null,{default:a(()=>[n("⌋")]),_:1}),s(l,null,{default:a(()=>[n("+")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1})]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("=")]),_:1}),s(m,null,{default:a(()=>[s(p,null,{default:a(()=>[n("2")]),_:1}),s(c,null,{default:a(()=>[s(l,null,{default:a(()=>[n("⌈")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(f,null,{default:a(()=>[s(t,null,{default:a(()=>[n("g")]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1}),s(l,null,{default:a(()=>[n("⌉")]),_:1})]),_:1})]),_:1}),s(l,null,{default:a(()=>[n(">")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("e")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("2\\times 2^k=2 \\times 2^{\\lfloor log_2(len) \\rfloor}=2^{\\lfloor log_2(len) \\rfloor+1}=2^{\\lceil log_2(len) \\rceil} \\gt len")]),_:1})]),_:1})]),_:1})]),rs]),n("。")])])]),ms,e("p",null,[n("预处理："),e("span",ds,[e("span",fs,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("O")]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(t,null,{default:a(()=>[n("l")]),_:1}),s(t,null,{default:a(()=>[n("o")]),_:1}),s(t,null,{default:a(()=>[n("g")]),_:1}),s(t,null,{default:a(()=>[n("n")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("O(nlogn)")]),_:1})]),_:1})]),_:1})]),_s]),n("。")]),e("p",null,[n("查询："),e("span",hs,[e("span",ks,[s(r,null,{default:a(()=>[s(i,null,{default:a(()=>[s(c,null,{default:a(()=>[s(t,null,{default:a(()=>[n("O")]),_:1}),s(l,null,{default:a(()=>[n("(")]),_:1}),s(p,null,{default:a(()=>[n("1")]),_:1}),s(l,null,{default:a(()=>[n(")")]),_:1})]),_:1}),s(u,{encoding:"application/x-tex"},{default:a(()=>[n("O(1)")]),_:1})]),_:1})]),_:1})]),gs]),n("。")]),ys,e("p",null,[e("a",zs,[n("洛谷-P3865-【模板】ST表"),s(_)])]),xs])}const qs=h(x,[["render",bs],["__file","模板-ST表.html.vue"]]);export{qs as default};
